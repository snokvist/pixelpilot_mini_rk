; PixelPilot Mini PSD sample configuration with mid-left bar plot

[drm]
card = /dev/dri/card0
connector = HDMI-A-1
video-plane-id = 76
use-udev = true
osd-plane-id = 0

[udp]
port = 5600
video-pt = 97
audio-pt = 98

[splash]
; Provide an Annex-B H.265 file with repeated key frames for the idle slate.
enable = false
input = /opt/pixelpilot/splash/standby.h265
fps = 30.0
idle-timeout-ms = 2000
default-sequence = intro

[splash.sequence.intro]
start = 0
end = 179

[splash.sequence.loop]
start = 180
end = 359

[pipeline]
latency-ms = 8
custom-sink = receiver

[audio]
device = plughw:CARD=rockchiphdmi0,DEV=0
disable = false
optional = true

[record]
; Output files receive an automatic -YYYYMMDD-HHMMSS suffix.
enable = false
path = /tmp/pixelpilot-recording.mkv
audio = true

[osd]
enable = true
refresh-ms = 500
plane-id = 0
elements = stats, psd_histogram, jitter_plot

[osd.element.stats]
type = text
anchor = top-left
padding = 8
background = transparent-grey
border = transparent-white
foreground = white
line = HDMI {display.mode} plane={drm.video_plane_id}
line = UDP port={udp.port} PTv={udp.vid_pt} PTa={udp.aud_pt}
line = Pipeline {pipeline.state} restarts={pipeline.restart_count}{pipeline.audio_suffix}
line = RTP loss={udp.lost_packets} reo={udp.reordered_packets} dup={udp.duplicate_packets}
line = Jitter {udp.jitter.latest_ms}/{udp.jitter.avg_ms}ms bitrate {udp.bitrate.latest_mbps}/{udp.bitrate.avg_mbps}Mbps

[osd.element.psd_histogram]
type = bar
anchor = mid-left
size = 320x120
sample-spacing = 12
bar-width = 8
metric = udp.frames.last_bytes
label = Frame Size (KB)
foreground = cyan
background = transparent-grey
grid = transparent-white
info-box = true

[osd.element.jitter_plot]
type = line
anchor = bottom-right
size = 320x90
sample-spacing = 4
metric = udp.jitter.latest_ms
label = Jitter (ms)
info-box = false
line-color = yellow
background = transparent-grey
grid = transparent-white
