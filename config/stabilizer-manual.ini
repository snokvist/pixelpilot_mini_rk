; PixelPilot Mini RK stabilizer manual translation configuration
;
; Start from the demo configuration but keep the waveform disabled so the manual
; override is the only crop that gets applied. Diagnostics stay enabled so you
; can confirm the RGA copy is active and whether any clamps kick in.

[drm]
card = /dev/dri/card0
connector =
video-plane-id = 76
use-udev = true

[udp]
port = 5600
video-pt = 97
audio-pt = 98

[pipeline]
custom-sink = receiver
appsink-max-buffers = 6

[stabilizer]
enable = true
strength = 1.0
max-translation = 48
max-rotation = 5
diagnostics = true
demo-enable = false
demo-amplitude = 0.0
demo-frequency = 0.5
; The manual offsets are clamped by both max-translation and the guard bands
; below. Increase the guard to crop more from each edge and create a wider
; stabilisation window.
manual-enable = true
manual-offset-x = 48.0
manual-offset-y = 0.0
; Crop 96 pixels from the left/right edges and 48 pixels from the top/bottom.
; RGA scales the reduced image back up to the full output size so the frame
; still fills the display.
guard-band-x = 96.0
guard-band-y = 48.0
; Keep the motion estimator enabled so real frame deltas feed the stabiliser when manual offsets are zeroed.
estimator-enable = true
estimator-search = 48
estimator-downsample = 2
estimator-smoothing = 0.65
estimator-diagnostics = true

[osd]
enable = true
refresh-ms = 200
plane-id = 0

[record]
enable = false
